



<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="author" content="Caelum"/>
	<meta name="reply-to" content="contato@caelum.com.br"/>
	<meta name="author" content="Design"/>
	<meta name="reply-to" content="lokidg@gmail.com"/>
	
		
		<link href="../../documentacao/includes/css/java.css" rel="stylesheet" type="text/css" media="screen" />
		<link href="../../documentacao/includes/css/xml2html.css" rel="stylesheet" type="text/css" media="screen" />
		<link href="../../documentacao/includes/css/style.css" rel="stylesheet" type="text/css" media="screen" />
	
	<meta name="description" content="VRaptor 3 - a Java web framework focused on fast development"/>
	<meta name="keywords" content="sites, web, desenvolvimento, development, java, opensource"/>
	<title>V|Raptor - High productivity in Java web development</title>
	<link href="../../screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../../menu.css" rel="stylesheet" type="text/css" media="screen" />
    <!--[if lt IE 7]>
    <script src="http://ie7-js.googlecode.com/svn/version/2.0(beta3)/IE7.js" type="text/javascript"></script>
    <![endif]-->
</head>

<body>
	<div id="headerWrap">
    	<div id="headerContent">
        	<h1 id="logoVraptor"><span>V|Raptor</span></h1><!-- vraptorlogo-->
            
            <ul id="langMenu">
            	<li><a id="engBtn" href="../../en/"><span>ENGLISH</span></a></li>
                <li><a id="ptBtn" href="../../pt/"><span>PORTUGUÊS</span></a></li>
            </ul><!-- langMenu-->            
        </div><!-- header content -->
    </div><!-- header wrap-->
    
    <div id="menuWrap">
    	<ul id="menuElementsEn">
        	<li><a id="homeBtnEn" href="../../en/"><span>home</span></a></li>
        	<li><a id="downloadBtnEn" href="../../en/download.jsp"><span>download</span></a></li>
        	<li><a id="documentacaoBtnEn" href="../../documentation/"><span>Documentation</span></a></li>
        	<li><a id="beneficiosBtnEn" href="../../benefits.jsp"><span>Benefits</span></a></li>
        	<li><a id="suporteBtnEn" href="../../support.jsp"><span>Support</span></a></li>
        	<li><a id="vraptor2BtnEn" href="../../en/vraptor2.jsp"><span>vraptor2</span></a></li>
        </ul><!-- menuElements-->
    </div><!-- menuWrap-->
<div id="contentWrap">
    	
			<ul id="subMenu">
				<li><a href="../../javadoc">Javadoc</a></li>
				<li>|</li>
				<li><a href="../../team.jsp">Team</a></li>
			</ul>
		<div id="contentDocumentacao">      	
			<div class="download"><a href="../vraptor3.pdf">Download as PDF</a></div>
        	<h2 class="title"><span>documentation</span></h2>
        	<h3 class="title">configuration, migration and utilization.</h3>            <div id="subMenuDoc">
            	<img id="positionTop" src="../includes/images/subMenuTop-trans.png" />
                <img id="positionBottom" src="../includes/images/subMenuBottom-trans.png" />
            	<ol type="1">
									<li><a class="link_toc" href="../../documentation/vraptor3-one-minute-guide/">1. VRaptor3 - One minute guide</a></li>
		
									<li><a class="link_toc" href="../../documentation/vraptor3-ten-minutes-guide/">2. VRaptor3 - Ten minutes guide</a></li>
		
									<li><a class="link_toc" href="../../documentation/resources-rest/">3. Resources-Rest</a></li>
		
									<li><a class="link_toc" href="../../documentation/components/">4. Components</a></li>
		
									<li><a class="link_toc" href="../../documentation/converters/">5. Converters</a></li>
		
									<li><a class="link_toc" href="../../documentation/interceptors/">6. Interceptors</a></li>
		
									<li><a class="link_toc" href="../../documentation/validation/">7. Validation</a></li>
		
									<li><a class="link_toc" href="../../documentation/view-and-ajax/">8. View and Ajax</a></li>
		
									<li><a class="link_toc" href="../../documentation/dependency-injection/">9. Dependency injection</a></li>
		
									<li><a class="link_toc" href="../../documentation/download-and-upload/">10. Download and Upload</a></li>
		
									<li><a class="link_toc" href="../../documentation/utility-components/">11. Utility Components</a></li>
		
									<li><a class="link_toc" href="../../documentation/advanced-configurations-overriding-vraptor-s-behavior-and-conventions/">12. Advanced configurations: overriding VRaptor's behavior and conventions</a></li>
		
									<li><a class="link_toc" href="../../documentation/google-app-engine/">13. Google App Engine</a></li>
		
									<li><a class="link_toc" href="../../documentation/testing-components-and-controllers/">14. Testing components and controllers</a></li>
		
									<li><a class="link_toc" href="../../documentation/scala/">15. Scala</a></li>
		
									<li><a class="link_toc" href="../../documentation/optimizations/">16. Optimizations</a></li>
		
									<li><a class="link_toc" href="../../documentation/vraptor-scaffold/">17. VRaptor Scaffold</a></li>
		
									<li><a class="link_toc" href="../../documentation/exception-handling/">18. Exception handling</a></li>
		
									<li><a class="link_toc" href="../../documentation/how-to-contribute-to-vraptor/">19. How to contribute to VRaptor</a></li>
		
									<li><a class="link_toc" href="../../documentation/changelog/">20. ChangeLog</a></li>
		
									<li><a class="link_toc" href="../../documentation/migrating-from-vraptor2-to-vraptor3/">21. Migrating from VRaptor2 to VRaptor3</a></li>
		
                </ol>
            </div><!-- submenu-->
                        
            <div id="textoCapitulo">
	
		<h2 class="chapter">Resources-Rest</h2>

		


<h3 class="section">What are Resources?</h3>
	    	<p>Resources are anything that can be accessed by our clients.</p>
	    	<p>In a VRaptor-based Web application, a resource must be annotated with <code>@Resource</code>.
If you annotate a class with <code>@Resource</code>, all its public methods become accessible
through GET requests to specific URIs.</p>
	    	<p>The following example shows a resource called <code>ClienteController</code>, which provides
several operations over clients.</p>
	    	<p>Creating the class below with all its methods instantly make the URIs <strong>/client/add</strong>,
<strong>/client/list</strong>, <strong>/client/show</strong>, <strong>/client/remove</strong> and <strong>/client/update</strong>
available, each one invoking the respective method.</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
</span><span class="java4">public class </span><span class="java10">ClientController </span><span class="java8">{<br />
 <br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">add</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
&nbsp; </span><span class="java4">public </span><span class="java10">List&lt;Client&gt; list</span><span class="java8">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">return </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
&nbsp; </span><span class="java4">public </span><span class="java10">Client show</span><span class="java8">(</span><span class="java10">Client profile</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">return </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
 <br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">remove</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
<br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">update</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
}</span></code></div>
		

<h3 class="section">Method parameters</h3>
	    	<p>You can receive parameters on your controller methods, and if those parameters
follow the java beans convention (getters and setters for class fields), 
you can use dots for browsing through the fields. For instance, on method:</p>
	    	<div class="java"><code class="java">
<span class="java4">public </span><span class="java9">void </span><span class="java10">update</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp;&nbsp; </span><span class="java3">//...<br />
</span><span class="java8">}</span></code></div>
	    	<p>you can receive on the request parameters:</p>
	    	<pre class="code properties">

client.id=3
client.name=John Doe
client.user.login=johndoe

</pre>
	    	<p>and the respective fields will be set, browsing through getters and setters starting
from client.</p>
	    	<p>If an object field or a method parameter is a list (List&lt;&gt; or array), you can receive
several request parameters, using square brackets and indexes:</p>
	    	<pre class="code properties">

client.phones[0]=+55 11 5571-2751 #if it is a string list
client.relatives[0].id=1 #if it is an arbitrary object, you can continue to browse
client.relatives[3].id=1 #indexes don't need to be sequential
client.relatives[0].name=Mary Doe #using the same index, it will be set on same object
clients[1].id=23 #it works if you receive a client list as method parameter

</pre>
	    	<div class="box"><h4>Reflection on parameter names</h4>
<p>Unfortunately Java can't reflect parameters names, these data don't stay in bytecode
(unless you compile your code in debug mode, but that is optional). It causes that most
frameworks that need this kind of information end up creating annotations, which makes
a very ugly code (like JAX-WS, where its very common to find methods with signature like:
<code>void add(@WebParam(name="client") Client client)</code>).</p><p>VRaptor uses the Paranamer framework (<a href="http://paranamer.codehaus.org">http://paranamer.codehaus.org</a>), which can get parameter
names information through pre compilation or debug data, avoiding the creation of annotations
for this purpose. Some VRaptor developers also participate in Paranamer development.</p></div>
		

<h3 class="section">Scopes</h3>
	    	<p>Sometimes you want to share a component among all users, or through all requests from
the same user or one instance for each user request.</p>
	    	<p>To specify in which scope your component will live, use the annotations
<code>@ApplicationScoped</code>, <code>@SessionScoped</code> and <code>@RequestScoped</code>.</p>
	    	<p>If you don't specify a scope for your component, VRaptor assumes the request scope,
meaning a fresh instance will be created for each request.</p>
		

<h3 class="section">@Path</h3>
	    	<p>The <code>@Path</code> annotation allows you to specify custom access URIs to your controller methods.
The basic usage of the annotation is to specify a fixed URI. The following example shows
how to customize the access URI for a method that accepts <em>POST</em> requests only. The URI
we want to specify is <strong>/client</strong>:</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
</span><span class="java4">public class </span><span class="java10">ClientController </span><span class="java8">{<br />
<br />
&nbsp; </span><span class="java16">@Path</span><span class="java8">(</span><span class="java5">&#34;/client&#34;</span><span class="java8">)<br />
&nbsp; </span><span class="java16">@Post <br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">add</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp; }<br />
&nbsp;&nbsp;&nbsp; <br />
}</span></code></div>
	    	<p>If you place the @Path on ClientController, the specified value will be used as prefix for all
URIs from this controller.</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
@Path</span><span class="java8">(</span><span class="java5">&#34;/clients&#34;</span><span class="java8">)<br />
</span><span class="java4">public class </span><span class="java10">ClientController </span><span class="java8">{<br />
&nbsp;&nbsp;&nbsp; </span><span class="java3">//URI: /clients/list<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">list</span><span class="java8">() {</span><span class="java10">...</span><span class="java8">}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="java3">//URI: /clients/save<br />
&nbsp;&nbsp;&nbsp; </span><span class="java16">@Path</span><span class="java8">(</span><span class="java5">&#34;save&#34;</span><span class="java8">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">add</span><span class="java8">() {</span><span class="java10">...</span><span class="java8">}<br />
&nbsp;&nbsp;&nbsp; <br />
&nbsp;&nbsp;&nbsp; </span><span class="java3">//URI: /clients/allClients<br />
&nbsp;&nbsp;&nbsp; </span><span class="java16">@Path</span><span class="java8">(</span><span class="java5">&#34;/allClients&#34;</span><span class="java8">)<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">listAll</span><span class="java8">() {</span><span class="java10">...</span><span class="java8">}<br />
}</span></code></div>
		

<h3 class="section">Http Methods</h3>
	    	<p>The best practice when using HTTP Methods is to specify a different methods,
like GET, POST, PUT etc, for the same URI.</p>
	    	<p>In order to accomplish that, we use annotations <code>@Get</code>, <code>@Post</code>, <code>@Delete</code> etc, which 
also allows us to configure a custom URI in the same way as <code>@Path</code>.</p>
	    	<p>The following example changes the default URIs for <code>ClienteController</code>.
Now we specify two different URIs for different HTTP methods:</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
</span><span class="java4">public class </span><span class="java10">ClientController </span><span class="java8">{<br />
<br />
&nbsp; </span><span class="java16">@Post</span><span class="java8">(</span><span class="java5">&#34;/client&#34;</span><span class="java8">)<br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">add</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp; }<br />
&nbsp; <br />
&nbsp; </span><span class="java16">@Path</span><span class="java8">(</span><span class="java5">&#34;/&#34;</span><span class="java8">)<br />
&nbsp; </span><span class="java4">public </span><span class="java10">List&lt;Client&gt; list</span><span class="java8">() {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">return </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
<br />
&nbsp; </span><span class="java16">@Get</span><span class="java8">(</span><span class="java5">&#34;/client&#34;</span><span class="java8">)<br />
&nbsp; </span><span class="java4">public </span><span class="java10">Client show</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">return </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
 <br />
&nbsp; </span><span class="java16">@Delete</span><span class="java8">(</span><span class="java5">&#34;/client&#34;</span><span class="java8">)<br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">remove</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
&nbsp; </span><span class="java16">@Put</span><span class="java8">(</span><span class="java5">&#34;/client&#34;</span><span class="java8">)<br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">update</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
}</span></code></div>
	    	<p>As you can see, we used HTTP methods + a specific URI to identify each method
in our Java class.</p>
	    	<p>We must be <strong>very careful</strong> when creating hyperlinks and HTML forms, because web browsers
currently support only <em>POST</em> and <em>GET</em> methods.</p>
	    	<p>For that reason, requests for methods <em>DELETE</em>, <em>PUT</em> etc should be created
through JavaScript, or by adding an extra parameter called <strong>_method</strong>. The latter
one only works on POST requests.</p>
	    	<p>This parameter will overwrite the real HTTP method being invoked.</p>
	    	<p>The following example creates a link to show one client's data:</p>
	    	<div class="xml"><code class="xml"><span class="textag">&lt;a</span>&nbsp;<span class="texattrib">href=</span><span class="texvalue">"/client?client.id=5"</span><span class="textag">&gt;</span><span class="texnormal">show&nbsp;client&nbsp;5</span><span class="textag">&lt;/a&gt;</span></code></div>
	    	<p>Now an example on how to invoke the method to add a client:</p>
	    	<div class="xml"><code class="xml"><span class="textag">&lt;form</span>&nbsp;<span class="texattrib">action=</span><span class="texvalue">"/client"</span>&nbsp;<span class="texattrib">method=</span><span class="texvalue">"post"</span><span class="textag">&gt;</span><span class="texnormal"><br /></span>
<span class="texnormal">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="textag">&lt;input</span>&nbsp;<span class="texattrib">name=</span><span class="texvalue">"client.name"</span>&nbsp;<span class="textag">/&gt;</span><span class="texnormal"><br /></span>
<span class="texnormal">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="textag">&lt;input</span>&nbsp;<span class="texattrib">type=</span><span class="texvalue">"submit"</span>&nbsp;<span class="textag">/&gt;</span><span class="texnormal"><br /></span>
<span class="texnormal"></span><span class="textag">&lt;/form&gt;</span></code></div>
	    	<p>Notice that if we want to remove a cliente using the <em>DELETE</em> HTTP method, we have
to use the <code>_method</code> parameter, since browsers still don't support that kind
of requests:</p>
	    	<div class="xml"><code class="xml"><span class="textag">&lt;form</span>&nbsp;<span class="texattrib">action=</span><span class="texvalue">"/client"</span>&nbsp;<span class="texattrib">method=</span><span class="texvalue">"POST"</span><span class="textag">&gt;</span><span class="texnormal"><br /></span>
<span class="texnormal">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="textag">&lt;input</span>&nbsp;<span class="texattrib">name=</span><span class="texvalue">"client.id"</span>&nbsp;<span class="texattrib">value=</span><span class="texvalue">"5"</span>&nbsp;<span class="texattrib">type=</span><span class="texvalue">"hidden"</span>&nbsp;<span class="textag">/&gt;</span><span class="texnormal"><br /></span>
<span class="texnormal">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="textag">&lt;button</span>&nbsp;<span class="texattrib">type=</span><span class="texvalue">"submit"</span>&nbsp;<span class="texattrib">name=</span><span class="texvalue">"_method"</span>&nbsp;<span class="texattrib">value=</span><span class="texvalue">"DELETE"</span><span class="textag">&gt;</span><span class="texnormal">remove&nbsp;client&nbsp;5</span><span class="textag">&lt;/button&gt;</span><span class="texnormal"><br /></span>
<span class="texnormal"></span><span class="textag">&lt;/form&gt;</span></code></div>
	    	<p><h3>Path with variable injection</h3>
Sometimes we want the <em>uri</em> to include, for example, the unique identifier of
my resource.</p>
	    	<p>Suppose a client controller application where the client's unique identifier (primary key)
is a number. We can map our URIs as <em>/client/{client.id}</em>, so we can visualize each client.</p>
	    	<p>That is, if we access the URI <em>/client/2</em>, the <strong>show</strong> method will be invoked
and the <em>client.id</em> parameter will be set to <strong>2</strong>. If the URI <em>/client/1717</em> is
accessed, the same method will be invoked with the <strong>1717</strong> value.</p>
	    	<p>That way we can create unique URIs to identify different resources in our application.
See the mentioned example:</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
</span><span class="java4">public class </span><span class="java10">ClientController </span><span class="java8">{<br />
<br />
&nbsp; </span><span class="java16">@Get<br />
&nbsp; @Path</span><span class="java8">(</span><span class="java5">&#34;/client/{client.id}&#34;</span><span class="java8">)&nbsp; <br />
&nbsp; </span><span class="java4">public </span><span class="java10">Cliente show</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">return </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
}</span></code></div>
	    	<p>You can go further and set several parameters through the URI:</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
</span><span class="java4">public class </span><span class="java10">ClientController </span><span class="java8">{<br />
<br />
&nbsp; </span><span class="java16">@Get<br />
&nbsp; @Path</span><span class="java8">(</span><span class="java5">&#34;/client/{client.id}/show/{section}&#34;</span><span class="java8">)&nbsp; <br />
&nbsp; </span><span class="java4">public </span><span class="java10">Client show</span><span class="java8">(</span><span class="java10">Client client, String section</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">return </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
}</span></code></div>
	    	<p><h3>Multiple paths for the same logic method</h3>
You can set more than one path for the same logic method:</p>
	    	<div class="java"><code class="java">
<span class="java4">public class </span><span class="java10">ClientController </span><span class="java8">{<br />
<br />
&nbsp; </span><span class="java16">@Get<br />
&nbsp; @Path</span><span class="java8">({</span><span class="java5">&#34;/client/{client.id}/show/{section}&#34;</span><span class="java10">, </span><span class="java5">&#34;/client/{client.id}/show/&#34;</span><span class="java8">})&nbsp; <br />
&nbsp; </span><span class="java4">public </span><span class="java10">Client show</span><span class="java8">(</span><span class="java10">Client client, String section</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">return </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
}</span></code></div>
	    	<p><h3>Paths with regular expressions</h3>
You can limit your parameter values using regular expressions using this idiom:</p>
	    	<div class="java"><code class="java">
<span class="java16">@Path</span><span class="java8">(</span><span class="java5">&#34;/color/{color:[0-9A-Fa-f]{6}}&#34;</span><span class="java8">)<br />
</span><span class="java4">public </span><span class="java9">void </span><span class="java10">setColor</span><span class="java8">(</span><span class="java10">String color</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java3">//...<br />
</span><span class="java8">}</span></code></div>
	    	<p>Everything that is after the colon is treated as a regex, and the URI will only match
if the parameter matches the regex:</p>
	    	<pre class="code text">

/color/a0b3c4 =&gt; matches
/color/AABBCC =&gt; matches
/color/white =&gt; doesn't match

</pre>
	    	<p><h3>Paths with wildcards</h3></p>
	    	<p>You can also use the * wildcard as a selection method for your URI. The following
example ignores anything that comes after the word <em>photo/</em> :</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
</span><span class="java4">public class </span><span class="java10">ClientController </span><span class="java8">{<br />
<br />
&nbsp; </span><span class="java16">@Get<br />
&nbsp; @Path</span><span class="java8">(</span><span class="java5">&#34;/client/{client.id}/photo/*&#34;</span><span class="java8">)&nbsp; <br />
&nbsp; </span><span class="java4">public </span><span class="java10">File photo</span><span class="java8">(</span><span class="java10">Client client</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">return </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
}</span></code></div>
	    	<p>And now a similar code, but used to download a specific photo from a client:</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
</span><span class="java4">public class </span><span class="java10">ClientController </span><span class="java8">{<br />
<br />
&nbsp; </span><span class="java16">@Get<br />
&nbsp; @Path</span><span class="java8">(</span><span class="java5">&#34;/client/{client.id}/photo/{photo.id}&#34;</span><span class="java8">)&nbsp; <br />
&nbsp; </span><span class="java4">public </span><span class="java10">File photo</span><span class="java8">(</span><span class="java10">Client client, Photo photo</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">return </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
}</span></code></div>
	    	<p>Sometimes you want the parameter to include the <strong>/</strong> character. In that case,
you should use the pattern {...*}:</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
</span><span class="java4">public class </span><span class="java10">ClientController </span><span class="java8">{<br />
<br />
&nbsp; </span><span class="java16">@Get<br />
&nbsp; @Path</span><span class="java8">(</span><span class="java5">&#34;/client/{client.id}/download/{path*}&#34;</span><span class="java8">)&nbsp; <br />
&nbsp; </span><span class="java4">public </span><span class="java10">File download</span><span class="java8">(</span><span class="java10">Client client, String path</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">return </span><span class="java10">...<br />
&nbsp; </span><span class="java8">}<br />
&nbsp; <br />
}</span></code></div>
	    	<p><h3>Specifying priorities for your paths</h3></p>
	    	<p>It is possible for some URIs to be handled by more than one method in our class:</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
</span><span class="java4">public class </span><span class="java10">PostController </span><span class="java8">{<br />
<br />
&nbsp; </span><span class="java16">@Get<br />
&nbsp; @Path</span><span class="java8">(</span><span class="java5">&#34;/post/{post.author}&#34;</span><span class="java8">)<br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">show</span><span class="java8">(</span><span class="java10">Post post</span><span class="java8">) { </span><span class="java10">... </span><span class="java8">}<br />
<br />
&nbsp; </span><span class="java16">@Get<br />
&nbsp; @Path</span><span class="java8">(</span><span class="java5">&#34;/post/current&#34;</span><span class="java8">)<br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">current</span><span class="java8">() { </span><span class="java10">... </span><span class="java8">}<br />
}</span></code></div>
	    	<p>The URI <code>/post/current</code> can be handled by both <code>show</code> and <code>current</code> methods.
But I don't want to invoke the <code>show</code> method with that URI, 
what I want is VRaptor to test the <code>current</code>
path first, avoiding the invocation of the <code>show</code> method.</p>
	    	<p>In order to do that, we can define priorities for <code>@Path</code>s, so VRaptor will first
test paths with higher priority, in other words, paths with lower priority values.</p>
	    	<div class="java"><code class="java">
<span class="java16">@Resource<br />
</span><span class="java4">public class </span><span class="java10">PostController </span><span class="java8">{<br />
<br />
&nbsp; </span><span class="java16">@Get<br />
&nbsp; @Path</span><span class="java8">(</span><span class="java10">value = </span><span class="java5">&#34;/post/{post.author}&#34;</span><span class="java10">, priority = Path.LOW</span><span class="java8">)<br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">show</span><span class="java8">(</span><span class="java10">Post post</span><span class="java8">) { </span><span class="java10">... </span><span class="java8">}<br />
<br />
&nbsp; </span><span class="java16">@Get<br />
&nbsp; @Path</span><span class="java8">(</span><span class="java10">value = </span><span class="java5">&#34;/post/current&#34;</span><span class="java10">, priority = Path.HIGH</span><span class="java8">)<br />
&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">current</span><span class="java8">() { </span><span class="java10">... </span><span class="java8">}<br />
}</span></code></div>
	    	<p>This way, the "/post/current" path will be tested before "/post/{post.author}" by VRaptor,
solving our problem.</p>
		

<h3 class="section">RoutesConfiguration</h3>
	    	<p>Finally, the most advanced way to configure access routes for your resources is
using a <strong>RoutesConfiguration</strong>.</p>
	    	<p>This component must be configured as application scoped and must implement the
<em>config</em> method:</p>
	    	<div class="java"><code class="java">
<span class="java16">@Component<br />
@ApplicationScoped<br />
</span><span class="java4">public class </span><span class="java10">CustomRoutes </span><span class="java4">implements </span><span class="java10">RoutesConfiguration </span><span class="java8">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">config</span><span class="java8">(</span><span class="java10">Router router</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp; }<br />
<br />
}</span></code></div>
	    	<p>Having access to a <strong>Router</strong>, you can define access routes to methods. And the best
part is that the configuration is refactor-friendly, that is, if you change a method's name,
the configuration reflects the change, but the <em>uri</em> stays the same:</p>
	    	<div class="java"><code class="java">
<span class="java16">@Component<br />
@ApplicationScoped<br />
</span><span class="java4">public class </span><span class="java10">CustomRoutes </span><span class="java4">implements </span><span class="java10">RoutesConfiguration </span><span class="java8">{<br />
<br />
&nbsp;&nbsp;&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">config</span><span class="java8">(</span><span class="java10">Router router</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="java4">new </span><span class="java10">Rules</span><span class="java8">(</span><span class="java10">router</span><span class="java8">) {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="java4">public </span><span class="java9">void </span><span class="java10">routes</span><span class="java8">() {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="java10">routeFor</span><span class="java8">(</span><span class="java5">&#34;/&#34;</span><span class="java8">)</span><span class="java10">.is</span><span class="java8">(</span><span class="java10">ClientController.</span><span class="java4">class</span><span class="java8">)</span><span class="java10">.list</span><span class="java8">()</span><span class="java10">;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; routeFor</span><span class="java8">(</span><span class="java5">&#34;/client/random&#34;</span><span class="java8">)</span><span class="java10">.is</span><span class="java8">(</span><span class="java10">ClientController.</span><span class="java4">class</span><span class="java8">)</span><span class="java10">.random</span><span class="java8">()</span><span class="java10">;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="java8">}<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</span><span class="java10">;<br />
&nbsp;&nbsp;&nbsp; </span><span class="java8">}<br />
<br />
}</span></code></div>
	    	<p>You can also put parameters on the uri and they will be set directly on the method
parameters. You can also add restrictions to these parameters:</p>
	    	<div class="java"><code class="java">
<span class="java3">// show method receives a Client that has an id<br />
</span><span class="java10">routeFor</span><span class="java8">(</span><span class="java5">&#34;/client/{client.id}&#34;</span><span class="java8">)</span><span class="java10">.is</span><span class="java8">(</span><span class="java10">ClientController.</span><span class="java4">class</span><span class="java8">)</span><span class="java10">.show</span><span class="java8">(</span><span class="java4">null</span><span class="java8">)</span><span class="java10">;<br />
</span><span class="java3">// If I want to ensure that the parameter is a number:<br />
</span><span class="java10">routeFor</span><span class="java8">(</span><span class="java5">&#34;/client/{client.id}&#34;</span><span class="java8">)</span><span class="java10">.withParameter</span><span class="java8">(</span><span class="java5">&#34;client.id&#34;</span><span class="java8">)</span><span class="java10">.matching</span><span class="java8">(</span><span class="java5">&#34;\\d+&#34;</span><span class="java8">)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class="java10">.is</span><span class="java8">(</span><span class="java10">ClientController.</span><span class="java4">class</span><span class="java8">)</span><span class="java10">.show</span><span class="java8">(</span><span class="java4">null</span><span class="java8">)</span><span class="java10">;</span></code></div>
		

</div><!-- content -->
            
        </div><!-- content cnt -->
    </div><!-- content wrap-->
    




		

    <div id="footerWrap">
    	<div id="footerContent">              
            <div id="suporteFooter">
	           	<a href="http://www.caelum.com.br/contato/" class="moreIcon" title="Saiba Mais"><span>+</span></a>
	           	<h3><a href="http://www.caelum.com.br/contato/">Support</a></h3>
                <p><a href="http://www.caelum.com.br/contato/">Get to know about our online support plans and be certain that your doubts and problems will be quickly solved.</a></p>            
            </div><!-- suporte-->
            <div id="consultoriaFooter">
           		<a href="http://www.caelum.com.br/servicos/consultoria/" class="moreIcon" title="Saiba Mais"><span>+</span></a>
           		<h3><a href="http://www.caelum.com.br/servicos/consultoria/">Consulting</a></h3>
                <p><a href="http://www.caelum.com.br/servicos/consultoria/">The VRaptor development team is available to help your development team. Learn about our consulting plans.</a></p>            
            </div><!-- consultoria-->
        	<div id="treinamentoFooter">
            	<a href="http://www.caelum.com.br/curso/fj-28-vraptor-hibernate-ajax/" class="moreIcon" title="Saiba Mais"><span>+</span></a><h3><a href="http://www.caelum.com.br/curso/fj-28-vraptor-hibernate-ajax/">Training</a></h3>
                <p><a href="http://www.caelum.com.br/curso/fj-28-vraptor-hibernate-ajax/">Caelum offers the oficial VRaptor training, with Hibernate and Ajax, focusing on the best practices concerning VRaptor. Click and find out more about it.</a></p>
            </div><!--treinamento-->
     <div class="footbar">
            	<img class="logoFooter" src="../../images/logoCaelumGray-trans.png" alt="vraptor logo" />
                <ul>
                	<li>site map:</li>
                    <li><a href="../../en/">home</a></li>
                    <li>|</li>
                    <li><a href="../../en/download.jsp">download</a></li>
                    <li>|</li>
                    <li><a href="../../documentation/">Documentation</a></li>
                    <li>|</li>
                    <li><a href="../../benefits.jsp">Benefits</a></li>
                    <li>|</li>
                    <li><a href="../../support.jsp">Support</a></li>
                    <li>|</li>
                    <li><a href="../../en/vraptor2.jsp">vraptor2</a></li>
                </ul>
                <p><a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 License</a> - VRaptor ©2009 Caelum - Ensino e Inovação</p>
                <p>Profiled with <a href="http://www.ej-technologies.com/products/jprofiler/overview.html">JProfiler</a></p>
            </div><!-- footnote-->
        </div><!-- footer content -->
        <a id="signature" href="mailto:lokidg@gmail.com">loki|design</a>
    </div><!-- footer wrap-->
<script type="text/javascript">
	var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
	document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript">
	try {
	var pageTracker = _gat._getTracker("UA-270161-11");
	pageTracker._trackPageview();
	} catch(err) {}
 </script>
    
</body>
</html>
